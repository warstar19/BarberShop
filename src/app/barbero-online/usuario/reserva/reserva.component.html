<div class="container mt-5 justify-content-center align-items-center vh-100">
  <h1 class="text-center mb-4" style="color: #ffc107;">Reserva de Cita</h1>
  <div class="d-flex flex-wrap justify-content-center gap-3">
    <!-- Formulario de reserva -->
    <div *ngIf="!formSubmitted" class="card shadow-lg border-0 rounded-4 fade-in" style="flex: 1 1 300px; max-width: 600px; background-color: #212529;">
      <div class="card-body p-4">
        <h2 class="text-center mb-4" style="color: #ffc107;">Formulario de Reserva</h2>

        <!-- Skeleton Loader (si est치 cargando) -->
        <div *ngIf="loading" class="skeleton-loader"></div>

        <form *ngIf="!loading" (ngSubmit)="onSubmit()" #reservForm="ngForm" class="form">
          <!-- Campo para seleccionar la tienda -->
          <div class="mb-3">
            <label for="tienda" class="form-label" style="color: #fdfdfd;">Selecciona una Tienda:</label>
            <select class="form-control rounded-3" id="tienda" name="tienda" ngModel (change)="cambiarTienda($event)" required style="background-color: #343a40; color: #fdfdfd; border: 1px solid #fdfdfd;">
              <option value="">Selecciona una tienda</option>
              <option *ngFor="let tienda of tiendas" [value]="tienda.nombre">{{ tienda.nombre }}</option>
            </select>
            <div *ngIf="reservForm.controls['tienda']?.invalid && reservForm.controls['tienda']?.touched" class="text-danger">
              Seleccionar una tienda es obligatorio.
            </div>
          </div>

          <!-- Campo para seleccionar fecha -->
          <div class="mb-3">
            <label for="fecha" class="form-label" style="color: #fdfdfd;">Fecha:</label>
            <input type="date" class="form-control rounded-3" id="fecha" name="fecha" ngModel placeholder="Selecciona una fecha" required style="background-color: #343a40; color: #fdfdfd; border: 1px solid #fdfdfd;">
            <div *ngIf="reservForm.controls['fecha']?.invalid && reservForm.controls['fecha']?.touched" class="text-danger">
              La fecha es obligatoria.
            </div>
          </div>

          <!-- Campo para seleccionar barbero -->
          <div class="mb-3">
            <label for="barbero" class="form-label" style="color: #fdfdfd;">Selecciona Barbero:</label>
            <select class="form-control rounded-3" id="barbero" name="barbero" ngModel required style="background-color: #343a40; color: #fdfdfd; border: 1px solid #fdfdfd;">
              <option value="">Selecciona un barbero</option>
              <option value="Barbero 1">Barbero 1</option>
              <option value="Barbero 2">Barbero 2</option>
            </select>
            <div *ngIf="reservForm.controls['barbero']?.invalid && reservForm.controls['barbero']?.touched" class="text-danger">
              Seleccionar un barbero es obligatorio.
            </div>
          </div>

          <!-- Campo para seleccionar servicio -->
          <div class="mb-3">
            <label for="servicio" class="form-label" style="color: #fdfdfd;">Tipo de Servicio:</label>
            <select class="form-control rounded-3" id="servicio" name="servicio" ngModel required style="background-color: #343a40; color: #fdfdfd; border: 1px solid #fdfdfd;">
              <option value="">Selecciona un servicio</option>
              <option value="Corte de cabello">Corte de cabello</option>
              <option value="Afeitado">Afeitado</option>
            </select>
            <div *ngIf="reservForm.controls['servicio']?.invalid && reservForm.controls['servicio']?.touched" class="text-danger">
              Seleccionar un servicio es obligatorio.
            </div>
          </div>

          <!-- Bot칩n para enviar formulario -->
          <button type="submit" class="btn btn-primary w-100 rounded-3" style="background-color: #ffc107; border-color: #ffc107;" [disabled]="reservForm.invalid">
            Agendar Cita
          </button>
        </form>
      </div>
    </div>

    <!-- Informaci칩n de la cita agendada -->
    <div *ngIf="formSubmitted" class="alert alert-success">
      <h3>Cita Agendada Correctamente</h3>
      <p>Tienda: {{ reservaData?.tienda }}</p>
      <p>Barbero: {{ reservaData?.barbero }}</p>
      <p>Servicio: {{ reservaData?.servicio }}</p>
      <p>Fecha: {{ reservaData?.fecha }}</p>
    </div>

    <!-- Bot칩n para agendar nueva cita -->
    <button (click)="resetForm()" class="btn btn-primary" style="background-color: #ffc107; border-color: #ffc107;">
      Agendar Nueva
    </button>
  </div>

  <!-- Mapa con estilo Bootstrap -->
  <div class="row w-100 mt-4">
    <div class="col-12">
      <div id="mapa" class="w-100" style="height: 180px; border-radius: 10px;"></div>
    </div>
  </div>
</div>
